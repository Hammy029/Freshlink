<h2 class="text-2xl font-bold mb-6 text-gray-800">All Orders (Admin View)</h2>

<div *ngIf="orders.length > 0; else noOrders" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
  <div *ngFor="let order of orders" class="bg-white border rounded-xl shadow-sm p-5 hover:shadow-md transition-all">

    <!-- ðŸ›’ Product Details -->
    <div>
      <h3 class="text-lg font-semibold text-indigo-700 mb-3">Ordered Products</h3>
      <ul class="space-y-3">
        <li *ngFor="let item of order.items" class="bg-gray-50 p-3 rounded-md border text-sm text-gray-700">
          <p><span class="font-medium">Product:</span> {{ item.product?.name }}</p>
          <p><span class="font-medium">Category:</span> {{ item.product?.category?.name || 'N/A' }}</p>
          <p><span class="font-medium">Farm:</span> {{ item.product?.farm?.name || 'Unknown' }}</p>
          <p><span class="font-medium">Price:</span> KES {{ item.product?.price }}</p>
          <p><span class="font-medium">Quantity:</span> {{ item.quantity }}</p>
          <p><span class="font-medium">Subtotal:</span> KES {{ item.product?.price * item.quantity }}</p>
        </li>
      </ul>
    </div>

    <!-- Divider -->
    <hr class="my-4 border-gray-300" />

    <!-- ðŸ“¦ Order Summary -->
    <div class="text-sm text-gray-800 space-y-2">
      <h4 class="text-indigo-600 font-semibold">Order Summary</h4>
      <p><span class="font-medium">Order ID:</span> {{ order._id }}</p>
      <p>
        <span class="font-medium">Total:</span>
        <span class="text-green-700 font-bold">{{ order.totalAmount | currency: 'KES' }}</span>
      </p>
      <p><span class="font-medium">Date:</span> {{ order.createdAt | date: 'medium' }}</p>
    </div>

    <!-- ðŸ‘¤ User Info -->
    <div class="mt-4 text-sm text-gray-800 space-y-1">
      <h4 class="text-indigo-600 font-semibold">Customer Details</h4>
      <p><span class="font-medium">Name:</span> {{ order.userId?.name }}</p>
      <p><span class="font-medium">Email:</span> {{ order.userId?.email }}</p>
    </div>

    <!-- ðŸš« Cancel Order -->
    <button
      (click)="cancelOrder(order._id)"
      class="mt-5 w-full bg-red-600 hover:bg-red-700 text-white font-semibold py-2 px-4 rounded-md transition"
    >
      Cancel Order
    </button>
  </div>
</div>

<ng-template #noOrders>
  <p class="text-center text-gray-500 text-lg mt-8">No orders found.</p>
</ng-template>
